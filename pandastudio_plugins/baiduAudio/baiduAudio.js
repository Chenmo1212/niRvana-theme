var baiduAudio={stopped:!0,getToken:function(){baiduAudio.stop(),baiduAudio.tokenData=pandastudio_framework.baiduAudio,baiduAudio.makePlayer()},makePlayer:function(){var a=$("<div>").attr("id","baiduAudioPlayer"),i=$('<i class="fa fa-play-circle" aria-hidden="true"></i>').addClass("playBtn active").on("click",function(a){baiduAudio.play()});pauseBtn=$('<i class="fa fa-pause-circle" aria-hidden="true"></i>').addClass("pauseBtn").on("click",function(a){baiduAudio.pause()}),stopBtn=$('<i class="fa fa-stop-circle" aria-hidden="true"></i>').addClass("stopBtn").on("click",function(a){baiduAudio.stop()}),text=$("<span>朗读本文</span>").addClass("decoration"),a.append(text).append(i).append(pauseBtn).append(stopBtn),baiduAudio.tokenData.enable&&($(".single .article_wrapper article").prepend('<div class="baiduAudioWrap"></div>'),$(".article_wrapper article .baiduAudioWrap").append(a))},tokenData:{},speak:function(a){if(baiduAudio.tokenData.access_token){if(a<1)return!1;var i=baiduAudio.tokenData.access_token,d=baiduAudio.tokenData.session_key,e=baiduAudio.tokenData.spd,u=baiduAudio.tokenData.pit,o=baiduAudio.tokenData.per;baiduAudio.audioArray=[];for(var t=0;t<a.length;t++){var n="//tsn.baidu.com/text2audio?tex="+encodeURIComponent(a[t])+"&lan=zh&ctp=1&cuid="+d+"&per="+o+"&spd="+e+"&pit="+u+"&tok="+i;baiduAudio.audioArray.unshift(n)}return baiduAudio.audio.preload=!0,baiduAudio.audio.controls=!0,baiduAudio.audio.src=baiduAudio.audioArray.pop(),baiduAudio.audio.addEventListener("ended",baiduAudio.playEndedHandler,!1),baiduAudio.audio.loop=!1,jQVue.prototype.$message("语音合成中，请稍后..."),!0}return!1},playEndedHandler:function(){baiduAudio.audioArray.length>0?(baiduAudio.audio.src=baiduAudio.audioArray.pop(),baiduAudio.audio.play()):baiduAudio.stop()},audioArray:[],audio:new Audio,play:function(){baiduAudio.stopped&&(baiduAudio.speak(baiduAudio.getTextArray()),baiduAudio.stopped=!1),$("#baiduAudioPlayer .playBtn").removeClass("active"),$("#baiduAudioPlayer .pauseBtn").addClass("active"),$("#baiduAudioPlayer .stopBtn").addClass("active"),baiduAudio.audio.play()},pause:function(){$("#baiduAudioPlayer .playBtn").addClass("active"),$("#baiduAudioPlayer .pauseBtn").removeClass("active"),$("#baiduAudioPlayer .stopBtn").addClass("active"),baiduAudio.audio.pause()},stop:function(){$("#baiduAudioPlayer .playBtn").addClass("active"),$("#baiduAudioPlayer .pauseBtn").removeClass("active"),$("#baiduAudioPlayer .stopBtn").removeClass("active"),baiduAudio.audio.pause(),baiduAudio.audio.removeEventListener("ended",baiduAudio.playEndedHandler,!1),baiduAudio.stopped=!0},getTextArray:function(){var a=[],i=$(".article_wrapper article").clone();i.find("#baiduAudioPlayer,[anti],[copy],[panda],[reborn],[panda-studio],pre,img,table,.modal,style,script").remove();var d="";$(i).find("div").each(function(){$(this).append("。")}),$(i).find("*").each(function(){var a=$(this).contents();$(this).replaceWith(a)}),d=$(i).html().replace(/&nbsp;/g,""),textArr=d.split(/。/g);for(var e="",u=0;u<textArr.length;u++)e.length+textArr[u].length<500?e+=textArr[u]+"。":(a.push(e),e="",e+=textArr[u]+"。");return a.push(e),a}};